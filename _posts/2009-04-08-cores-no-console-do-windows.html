---
layout: post
title: Cores no console do windows
published: true
---
Olá galera,<p />Atualmente eu estou criando uma biblioteca para Specs em PHP.<p />Como toda boa biblioteca do gênero, eu decidi que os testes iriam rodar atravéz da tela de comando.<p />Para o caso de testes, eu considero bastante importante que se tenha uma saída colorida para identificar de forma mais rápida os resultados. Pesquisando na net achei muita coisa sobre comandos ANSI que permitem fazer várias coisas legais, como por exemplo mover cursor, mudar a cor... Tudo muito bonito, até chegar no console do windows...<p />A desgraça não queria pegar cores de jeito nenhum, até achei em vários tutoriais na net para abilitar o ANSI no windows, mas no meu Vista (eca...) não funcionou... Então fui pro lado prático da coisa, fui ver onde funcionava. Eu utilizo o Cucumber para testes do Ruby aqui, e ele consegue fazer a saída colorida, então decidi ir por esse ponto. Depois de alguns testes eu vi que incluindo certas bibliotecas na hora de rodar o ruby, ele consegue automaticamente converter os ANSI para o console do windows, oque foi lindo, então eu meio que usei o ruby de proxy para a execução do programa em PHP, assim ele iria ler a saída, converter e exibir. Funcionou :D<p />Resultado:<p />[[posterous-content:wtyqojiirwCuovHvnJCb]]<p />Como podem ver, bastante colorido e legal :)<p />O código Ruby que eu usei para o proxy está aqui:<p /><div class="CodeRay">
  <div class="code"><pre>'rubygems'gem 'win32console', '&gt;= 1.2.0'require 'Win32/Console/ANSI'puts `/xampp/php/php5.3.0beta2/php.exe #{$*.join ' '}`</pre></div>
</div>
<p />Claro que para uma futura versão de release isso ai vai mudar muito (adaptar pra verificar se está em windows, tratamento de erros e etc...)<p />Enquanto isso a Limber Spec já está dando os primeiros passos e deve ter algo funcionando de verdade em breve :)<p />Só pra finalizar, uma referência esperta pra quem quizer dar uma olhada sobre comandos ANSI: <a href="http://academic.evergreen.edu/projects/biophysics/technotes/program/ansi_esc.htm">http://academic.evergreen.edu/projects/biophysics/technotes/program/ansi_esc.htm</a><div class="blogger-post-footer"><img class="posterous_download_image" src="https://blogger.googleusercontent.com/tracker/1053117534982092858-9037452137410716706?l=wilker-dev.blogspot.com" height="1" alt="" width="1" /></div>
